# Групповой проект YaMDb

[workflow](https://github.com/V-pix/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)

IP 51.250.16.171

## Оглавление
- [Описание](#description)
- [Технологии](#technologies)
- [Запуск проекта](#launch)
- [Пользовательские роли](#users)
- [Ресурсы API YaMDb](#resources)

<a id=description></a>
## Описание
Групповой проект YaMDb для отзывов пользователей на произведения.
Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий может быть расширен администратором. Сами произведения в YaMDb не хранятся. В каждой категории есть произведения: книги, фильмы или музыка. Произведению может быть присвоен жанр из списка предустановленных. Новые жанры может создавать только администратор. Пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти; из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.

Реализован REST API CRUD для моделей проекта, для аутентификации примненяется JWT-токен. В проекте реализованы пермишены, фильтрации, сортировки и поиск по запросам клиентов, реализована пагинация ответов от API, установлено ограничение количества запросов к API. 
### К API есть документация, доступная после запуска по адресу: `http://localhost/redoc/`

---
<a id=technologies></a>
## Технологии
- Python 3.10
- Django REST Framework
- Simple JWT - работа с токеном
- Django-filter - фильтрация запросов
- PostgreSQL - база данных
- Git - система контроля версий
- Docker, Docker-compose

<a id=launch></a>
## Запуск проекта
### Клонировать репозиторий и перейти в него в командной строке:
```bash
git clone git@github.com:V-pix/api_yamdb.git
```
### Перейти в репозиторий в командной строке:
```bash
cd api_yamdb
```
### Установить `docker` и `docker-compose`:
```bash
https://docs.docker.com/get-docker/
https://docs.docker.com/compose/
```
### Добавить `.env` файл в директорию `infra`.
#### Пример `.env` файлa:
```bash
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=1234546789
DB_HOST=db
DB_PORT=1234
SECRET_KEY=1234567890
EMAIL_HOST_PASSWORD = 12345678
```
### Перейдите в директорию с файлом `docker-compose.yaml`:
```bash
cd infra
```
### Пересоберите контейнеры и запустите их:
```bash
docker-compose up -d --build
```
### Выполните миграции:
```bash
docker-compose exec web python manage.py migrate
```
### Создайте суперюзера:
```bash
docker-compose exec web python manage.py createsuperuser
```
### Соберите статику:
```bash
docker-compose exec web python manage.py collectstatic --no-input
```
### Заполните тестовые данные:
```bash
docker-compose exec web python manage.py importcsv
```
### Теперь проект доступен по адресам:
```bash
http://localhost/
http://localhost/admin/
```
### Для заполнения базы тестовыми данными вы можете использовать файл `fixtures.json`, который находится в infra_sp2. Выполните команду:
```bash
docker-compose exec web python manage.py loaddata fixtures.json
```

<a id=users></a>
## Пользовательские роли
- **Аноним** — может просматривать описания произведений, читать отзывы и комментарии.
- **Аутентифицированный пользователь (user)** — может, как и **Аноним**, читать всё, 
дополнительно он может публиковать отзывы и ставить оценку произведениям 
(фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать 
и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию 
каждому новому пользователю.
- **Модератор (moderator)** — те же права, что и у **Аутентифицированного** 
пользователя плюс право удалять любые отзывы и комментарии.
- **Администратор (admin)** — полные права на управление всем контентом проекта. 
Может создавать и удалять произведения, категории и жанры. Может назначать 
роли пользователям.
- **Суперюзер Django** — обладает правами администратора (admin). Даже если 
изменить пользовательскую роль суперюзера — это не лишит его прав администратора. 
Суперюзер — всегда администратор, но администратор — не обязательно суперюзер.

<a id=resources></a>
## Ресурсы API YaMDb
- Ресурс auth: аутентификация.
- Ресурс users: пользователи.
- Ресурс titles: произведения, к которым пишут отзывы (определённый фильм, книга или песенка).
- Ресурс categories: категории (типы) произведений («Фильмы», «Книги», «Музыка»).
- Ресурс genres: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
- Ресурс reviews: отзывы на произведения. Отзыв привязан к определённому произведению.
- Ресурс comments: комментарии к отзывам. Комментарий привязан к определённому отзыву.